System.register(["jimu-core","jimu-arcgis","esri/widgets/LayerList","esri/widgets/FeatureTable"],(function(e,t){var i={},n={},a={},o={};return{setters:[function(e){i.React=e.React},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){a.default=e.default},function(e){o.default=e.default}],execute:function(){e((()=>{var e={2216:e=>{"use strict";e.exports=o},3447:e=>{"use strict";e.exports=a},6826:e=>{"use strict";e.exports=n},8891:e=>{"use strict";e.exports=i}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var c={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(c),r.d(c,{default:()=>y});var e=r(8891),t=r(6826),i=r(3447),n=r(2216);var a=function(e,t,i,n){return new(i||(i=Promise))((function(a,o){function r(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}s((n=n.apply(e,t||[])).next())}))};const{useEffect:o,useState:s,useRef:l}=e.React;let d,u;const p=document.querySelector("#app > div > div > div > div"),y=r=>{var c;const y=l(null),[f,m]=s(null),[v,g]=s(null);o((()=>{if(f&&!v){const e=f.view,t=document.createElement("div");y.current.append(t);const n=new i.default({view:e,container:t,selectionEnabled:!0,listItemCreatedFunction:function(e){var t;return a(this,void 0,void 0,(function*(){const i=e.item,n=i.layer.type;"imagery"!==n&&"imagery-tile"!==n&&"map-image"!==n||(i.actionsSections=[[{title:"Info",className:"esri-icon-description",id:"info"}],[{title:r.intl.formatMessage({id:"increaseOpacity",defaultMessage:"Increase opacity"}),className:"esri-icon-up",id:"increase-opacity"},{title:r.intl.formatMessage({id:"decreaseOpacity",defaultMessage:"Decrease opacity"}),className:"esri-icon-down",id:"decrease-opacity"}]]),0===i.children.length&&"wms"!==(null===(t=i.parent)||void 0===t?void 0:t.layer.type)&&"imagery-tile"!==i.layer.type&&"graphics"!==i.layer.type&&(i.actionsSections=[[{title:"Table",className:"esri-icon-table",id:"table"}]])}))}});n.on("trigger-action",(t=>a(void 0,void 0,void 0,(function*(){var i;const n=t.action.id,a=t.item,o=a.layer,r=o.type;"imagery"!==r&&"imagery-tile"!==r&&"map-image"!==r||("info"===n?window.open(null===(i=a.layer.portalItem)||void 0===i?void 0:i.itemPageUrl):"increase-opacity"===n?o.opacity<1&&(o.opacity+=.25):"decrease-opacity"===n&&o.opacity>0&&(o.opacity-=.25)),"table"!==n||d?"table"===n&&d&&(d.destroy(),w(a.layer,e)):w(a.layer,e)})))),g(n)}return()=>{v&&(v.destroy(),g(null))}}),[v,f]);const w=(e,t)=>a(void 0,void 0,void 0,(function*(){u=document.createElement("div"),u.id="table-container",u.style.width="100%",u.style.height="30%",u.style.position="absolute",u.style.bottom="0",p.append(u);const i=yield e.createFeatureLayer();d=new n.default({view:t,layer:i,container:u,menuConfig:{items:[{label:r.intl.formatMessage({id:"close",defaultMessage:"Close"}),iconClass:"esri-icon-close",clickFunction:function(){d&&d.destroy()}}]}})}));return e.React.createElement("div",{className:"widget-layerlist-widget",style:{width:"100%",height:"100%",overflowY:"auto"}},e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:null===(c=r.useMapWidgetIds)||void 0===c?void 0:c[0],onActiveViewChange:e=>{v&&(v.destroy(),g(null)),m(e)}}),e.React.createElement("div",{ref:y}))}})(),c})())}}}));