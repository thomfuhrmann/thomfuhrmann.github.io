System.register(["jimu-core","jimu-arcgis","jimu-ui","esri/rest/print","esri/rest/support/PrintParameters","esri/rest/support/PrintTemplate","esri/geometry/Point","calcite-components"],(function(e,t){var r={},n={},c={},o={},a={},i={},s={},u={};return{setters:[function(e){r.React=e.React,r.ReactDOM=e.ReactDOM},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){c.WidgetPlaceholder=e.WidgetPlaceholder},function(e){o.execute=e.execute},function(e){a.default=e.default},function(e){i.default=e.default},function(e){s.default=e.default},function(e){u.CalciteButton=e.CalciteButton,u.CalcitePanel=e.CalcitePanel,u.CalciteProgress=e.CalciteProgress}],execute:function(){e((()=>{var e={72:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M10 4H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM22 12h4c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2zm0-6h4v4h-4V6zM10 20H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0 6H6v-4h4v4zM26 20h-4c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2z"></path><path d="M28 16h-2c-2.671 0-5.182-1.04-7.071-2.929S16 8.671 16 6V4c0-2.2-1.8-4-4-4H4C1.8 0 0 1.8 0 4v8c0 2.2 1.8 4 4 4h2c2.671 0 5.182 1.04 7.071 2.929S16 23.329 16 26v2c0 2.2 1.8 4 4 4h8c2.2 0 4-1.8 4-4v-8c0-2.2-1.8-4-4-4zm2 12c0 .53-.209 1.031-.589 1.411S28.53 30 28 30h-8c-.53 0-1.031-.209-1.411-.589S18 28.53 18 28v-2c0-6.627-5.373-12-12-12H4c-.53 0-1.031-.209-1.411-.589S2 12.53 2 12V4c0-.53.209-1.031.589-1.411S3.47 2 4 2h8c.53 0 1.031.209 1.411.589S14 3.47 14 4v2c0 6.627 5.373 12 12 12h2c.53 0 1.031.209 1.411.589S30 19.47 30 20v8z"></path></svg>'},145:e=>{"use strict";e.exports=u},294:e=>{"use strict";e.exports=s},191:e=>{"use strict";e.exports=o},641:e=>{"use strict";e.exports=a},347:e=>{"use strict";e.exports=i},826:e=>{"use strict";e.exports=n},891:e=>{"use strict";e.exports=r},726:e=>{"use strict";e.exports=c}},t={};function l(r){var n=t[r];if(void 0!==n)return n.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,l),c.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var d={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(d),l.d(d,{__set_webpack_public_path__:()=>y,default:()=>x});var e=l(891),t=l(826),r=l(726),n=l(72),c=l.n(n),o=l(191),a=l(641),i=l(347),s=l(294),u=l(145);const{useState:p,useRef:f,useEffect:m}=e.React;function h(e,t,r){return e<t?t:e>r?r:e}const g={"A4 Hochformat":[190,265],"A4 Hochformat mit Legende":[190,225],"A4 Querformat":[277,178],"A4 Querformat mit Legende":[277,140],"A3 Hochformat":[277,385],"A3 Hochformat mit Legende":[277,335],"A3 Querformat":[400,264],"A3 Querformat mit Legende":[400,215]};function v({view:t,intl:r}){const[n,c]=p("GeoSphere Austria"),[l,d]=p(Object.keys(g)[0]),[v,w]=p(1e4),[x,y]=p(!1),b=f(null),M=f();M.current=v;const R=f();R.current=l;const C=f(null);function P(e){fetch(e.url).then((e=>e.blob())).then((e=>{const t=document.createElement("a");t.setAttribute("href",URL.createObjectURL(e)),t.setAttribute("download","GeoSphere_Maps_Print.pdf"),document.body.appendChild(t),t.click(),document.body.removeChild(t),y(!1)}))}function S(e){"AbortError"===e.name||console.error("Error encountered: ",e)}const E=(e,t)=>{const r=g[t][0]*e/1e3,n=g[t][1]*e/1e3;A(r,n)},A=(e,r)=>{const n=t.center,c=n.x-e/2,o=n.x+e/2,a=n.y-r/2,i=n.y+r/2,u=t.toScreen(new s.default({x:c,y:i,spatialReference:{wkid:t.spatialReference.wkid}})),l=t.toScreen(new s.default({x:o,y:a,spatialReference:{wkid:t.spatialReference.wkid}})),d=h(Math.round(u.x),0,t.width),p=h(Math.round(u.y),0,t.height),f=h(Math.round(l.x-u.x),0,t.width),m=h(Math.round(l.y-u.y),0,t.height);b&&b.current&&(b.current.style.display="block",b.current.style.left=d+"px",b.current.style.top=p+"px",b.current.style.width=f+"px",b.current.style.height=m+"px")};return m((()=>{M.current&&R.current&&E(M.current,R.current);const r=t.watch("extent",(()=>{M.current&&R.current&&E(M.current,R.current)})),n=document.querySelector(".esri-view-root"),c=document.createElement("div");n.append(c);const o={display:"none",position:"absolute",backgroundColor:"#fca5a5",opacity:"50%",border:"2px solid #db2525",pointerEvents:"none"};return e.ReactDOM.render(e.React.createElement((()=>e.React.createElement("div",{style:o,ref:b})),null),c),()=>{r.remove()}}),[]),e.React.createElement(u.CalcitePanel,{heading:r.formatMessage({id:"heading",defaultMessage:"PDF drucken"}),className:"px-3 vw-25"},e.React.createElement("div",null,x&&e.React.createElement(u.CalciteProgress,{type:"indeterminate"})),x?e.React.createElement(u.CalciteButton,{width:"half",slot:"footer",onClick:()=>{C.current&&(C.current.abort(),y(!1))}},r.formatMessage({id:"buttonCancel",defaultMessage:"Abbrechen"})):e.React.createElement(u.CalciteButton,{width:"half",slot:"footer",onClick:()=>{y(!0);const e=new i.default({layout:l,format:"pdf",layoutOptions:{titleText:n,scalebarUnit:"Kilometers",customTextElements:[]},exportOptions:{dpi:98},scalePreserved:!0,outScale:v}),r=new a.default({view:t,template:e});C.current=new AbortController,o.execute("https://gis.geosphere.at/maps/rest/services/tools/printing/GPServer/Export%20Web%20Map",r,{signal:C.current.signal}).then(P).catch(S)}},r.formatMessage({id:"buttonPrint",defaultMessage:"Drucken"})))}const{useState:w}=e.React,x=n=>{const[o,a]=w(null);return e.React.createElement("div",{className:"widget-print",style:{width:"100%",height:"100%",overflowY:"auto"}},n.useMapWidgetIds&&0===n.useMapWidgetIds.length&&e.React.createElement(r.WidgetPlaceholder,{icon:c(),widgetId:n.id,message:"Please select a map widget!"}),n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:n.useMapWidgetIds[0],onActiveViewChange:e=>{a(e)}}),o&&o.view&&n.intl&&e.React.createElement(v,{view:o.view,intl:n.intl}))};function y(e){l.p=e}})(),d})())}}}));