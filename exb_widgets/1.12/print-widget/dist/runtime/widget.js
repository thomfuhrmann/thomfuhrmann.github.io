System.register(["jimu-core","jimu-arcgis","jimu-ui","esri/rest/print","esri/rest/support/PrintParameters","esri/rest/support/PrintTemplate","esri/geometry/Point","calcite-components"],(function(e,t){var r={},c={},n={},a={},o={},i={},s={},l={};return{setters:[function(e){r.React=e.React,r.ReactDOM=e.ReactDOM},function(e){c.JimuMapViewComponent=e.JimuMapViewComponent},function(e){n.WidgetPlaceholder=e.WidgetPlaceholder},function(e){a.execute=e.execute},function(e){o.default=e.default},function(e){i.default=e.default},function(e){s.default=e.default},function(e){l.CalciteButton=e.CalciteButton,l.CalciteInputText=e.CalciteInputText,l.CalciteLabel=e.CalciteLabel,l.CalcitePanel=e.CalcitePanel,l.CalciteProgress=e.CalciteProgress}],execute:function(){e((()=>{var e={72:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M10 4H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM22 12h4c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2zm0-6h4v4h-4V6zM10 20H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0 6H6v-4h4v4zM26 20h-4c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2z"></path><path d="M28 16h-2c-2.671 0-5.182-1.04-7.071-2.929S16 8.671 16 6V4c0-2.2-1.8-4-4-4H4C1.8 0 0 1.8 0 4v8c0 2.2 1.8 4 4 4h2c2.671 0 5.182 1.04 7.071 2.929S16 23.329 16 26v2c0 2.2 1.8 4 4 4h8c2.2 0 4-1.8 4-4v-8c0-2.2-1.8-4-4-4zm2 12c0 .53-.209 1.031-.589 1.411S28.53 30 28 30h-8c-.53 0-1.031-.209-1.411-.589S18 28.53 18 28v-2c0-6.627-5.373-12-12-12H4c-.53 0-1.031-.209-1.411-.589S2 12.53 2 12V4c0-.53.209-1.031.589-1.411S3.47 2 4 2h8c.53 0 1.031.209 1.411.589S14 3.47 14 4v2c0 6.627 5.373 12 12 12h2c.53 0 1.031.209 1.411.589S30 19.47 30 20v8z"></path></svg>'},145:e=>{"use strict";e.exports=l},294:e=>{"use strict";e.exports=s},191:e=>{"use strict";e.exports=a},641:e=>{"use strict";e.exports=o},347:e=>{"use strict";e.exports=i},826:e=>{"use strict";e.exports=c},891:e=>{"use strict";e.exports=r},726:e=>{"use strict";e.exports=n}},t={};function u(r){var c=t[r];if(void 0!==c)return c.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,u),n.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var d={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(d),u.d(d,{__set_webpack_public_path__:()=>b,default:()=>w});var e=u(891),t=u(826),r=u(726),c=u(72),n=u.n(c),a=u(191),o=u(641),i=u(347),s=u(294),l=u(145);const{useState:p,useRef:m,useEffect:f}=e.React;function h(e,t,r){return e<t?t:e>r?r:e}const g={"A4 Hochformat":[190,265],"A4 Hochformat mit Legende":[190,225],"A4 Querformat":[277,178],"A4 Querformat mit Legende":[277,140],"A3 Hochformat":[277,385],"A3 Hochformat mit Legende":[277,335],"A3 Querformat":[400,264],"A3 Querformat mit Legende":[400,215]};function v({view:t,intl:r}){const[c,n]=p("GeoSphere Austria"),[u,d]=p(Object.keys(g)[0]),[v,x]=p(1e4),[w,b]=p(!1),y=m(null),M=m();M.current=v;const C=m();C.current=u;const R=m(null);function P(e){fetch(e.url).then((e=>e.blob())).then((e=>{const t=document.createElement("a");t.setAttribute("href",URL.createObjectURL(e)),t.setAttribute("download","GeoSphere_Maps_Print.pdf"),document.body.appendChild(t),t.click(),document.body.removeChild(t),b(!1)}))}function S(e){"AbortError"===e.name||console.error("Error encountered: ",e)}const E=(e,t)=>{const r=g[t][0]*e/1e3,c=g[t][1]*e/1e3;A(r,c)},A=(e,r)=>{const c=t.center,n=c.x-e/2,a=c.x+e/2,o=c.y-r/2,i=c.y+r/2,l=t.toScreen(new s.default({x:n,y:i,spatialReference:{wkid:t.spatialReference.wkid}})),u=t.toScreen(new s.default({x:a,y:o,spatialReference:{wkid:t.spatialReference.wkid}})),d=h(Math.round(l.x),0,t.width),p=h(Math.round(l.y),0,t.height),m=h(Math.round(u.x-l.x),0,t.width),f=h(Math.round(u.y-l.y),0,t.height);y&&y.current&&(y.current.style.display="block",y.current.style.left=d+"px",y.current.style.top=p+"px",y.current.style.width=m+"px",y.current.style.height=f+"px")};return f((()=>{M.current&&C.current&&E(M.current,C.current);const r=t.watch("extent",(()=>{M.current&&C.current&&E(M.current,C.current)})),c=document.querySelector(".esri-view-root"),n=document.createElement("div");c.append(n);const a={display:"none",position:"absolute",backgroundColor:"#fca5a5",opacity:"50%",border:"2px solid #db2525",pointerEvents:"none"};return e.ReactDOM.render(e.React.createElement((()=>e.React.createElement("div",{style:a,ref:y})),null),n),()=>{r.remove()}}),[]),e.React.createElement(l.CalcitePanel,{heading:r.formatMessage({id:"heading",defaultMessage:"PDF drucken"}),className:"px-3 vw-25"},e.React.createElement("div",null,w&&e.React.createElement(l.CalciteProgress,{type:"indeterminate"})),e.React.createElement(l.CalciteLabel,{className:"mt-5 mx-5"},r.formatMessage({id:"titleLabel",defaultMessage:"Titel"}),e.React.createElement(l.CalciteInputText,{placeholder:"Titel",onCalciteInputTextInput:e=>{n(e.target.value)},className:"mx-0"})),w?e.React.createElement(l.CalciteButton,{width:"half",slot:"footer",onClick:()=>{R.current&&(R.current.abort(),b(!1))}},r.formatMessage({id:"buttonCancel",defaultMessage:"Abbrechen"})):e.React.createElement(l.CalciteButton,{width:"half",slot:"footer",onClick:()=>{b(!0);const e=new i.default({layout:u,format:"pdf",layoutOptions:{titleText:c,scalebarUnit:"Kilometers",customTextElements:[]},exportOptions:{dpi:98},scalePreserved:!0,outScale:v}),r=new o.default({view:t,template:e});R.current=new AbortController,a.execute("https://gis.geosphere.at/maps/rest/services/tools/printing/GPServer/Export%20Web%20Map",r,{signal:R.current.signal}).then(P).catch(S)}},r.formatMessage({id:"buttonPrint",defaultMessage:"Drucken"})))}const{useState:x}=e.React,w=c=>{const[a,o]=x(null);return e.React.createElement("div",{className:"widget-print",style:{width:"100%",height:"100%",overflowY:"auto"}},c.useMapWidgetIds&&0===c.useMapWidgetIds.length&&e.React.createElement(r.WidgetPlaceholder,{icon:n(),widgetId:c.id,message:"Please select a map widget!"}),c.useMapWidgetIds&&1===c.useMapWidgetIds.length&&e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:c.useMapWidgetIds[0],onActiveViewChange:e=>{o(e)}}),a&&a.view&&c.intl&&e.React.createElement(v,{view:a.view,intl:c.intl}))};function b(e){u.p=e}})(),d})())}}}));